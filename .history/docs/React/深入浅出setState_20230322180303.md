在认识 setState 前，我们问几个常见问题
- `setState` 是同步还是异步？
- 如果是`异步`，怎么让它`同步`？
- 为什么要这样设计？

## 基本概念和使用

官网介绍：


## setState 的特性——批处理

### 同一时期多次调用 setState 会合并

如果在同一周期多次调用 `setState` ，后调用的 `setState` 将覆盖先调用的 `setState` 的值例如：

```js
this.setState({count: state.count + 1});
this.setState({count: state.count + 1});
this.setState({count: state.count + 1});

// 相当于
Object.assign(
  state,
  {count: state.count + 1},
  {count: state.count + 1},
  {count: state.count + 1},
)
```
举例：

```js
const DemoState = (props) => {
  let [number, setNumber] = useState(0);

  const add = () => {
    setNumber(number+1);
    console.log(number);

    setNumber(number+1);
    console.log(number);
  }

  return (
    <div>
        <span>{ number }</span>
        <button onClick={() => { add() }} >点击加 1</button>
    </div>
  )
}

// 0
// 0

// 页面展示数字 1
```
### 不同时期多次调用 setState 不会合并

例如 2 次 +1，一次在 setTimeout 里面，另一次在外面

```js

```

- 执行了 2 次 setState 加 1，但只执行最后一次 setState，所以没有 +2，最后还是 +1